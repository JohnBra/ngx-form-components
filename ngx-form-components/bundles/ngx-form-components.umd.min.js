!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-form-components",["exports","@angular/core","@angular/common"],e):e(t["ngx-form-components"]={},t.ng.core,t.ng.common)}(this,function(t,n,e){"use strict";var i=function(){function t(){}return t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),s=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:n.Component,args:[{selector:"nfc-ngx-form-components",template:"\n    <p>\n      ngx-form-components works!\n    </p>\n  "}]}],t.ctorParameters=function(){return[]},t}(),r=function(){},o=function(){function t(t,e,i){this.elementRef=t,this.renderer=e,this.iterableDiffers=i,this.min=0,this.max=100,this.step=1,this.toolTips=!1,this.minRangeSlider=!1,this.rangeChange=new n.EventEmitter,this.onTouchedCallback=r,this.onChangeCallback=r,this.combineToolTip=!1,this.iterableDiffer=this.iterableDiffers.find([]).create(null)}return t.prototype.ngDoCheck=function(){this.iterableDiffer.diff(this.range)&&(this.onChangeCallback(this.range),this.onTouchedCallback(this.range),this.minRangeSlider?this.rangeChange.emit(this.range):this.rangeChange.emit(this.range[1]))},t.prototype.ngOnInit=function(){this.setDefaultRange(),this.setDimensions(),this.setCustomCss()},t.prototype.setDefaultRange=function(){isNaN(this.defaultRange)?Array.isArray(this.defaultRange)&&2===this.defaultRange.length&&!this.defaultRange.some(isNaN)?this.defaultRange[0]>=this.min&&this.defaultRange[1]<=this.max?this.minRangeSlider?this.range=this.defaultRange:this.range=[this.min,this.defaultRange[1]]:(console.error("default range is not compliant with min and max values ... set fallback values"),this.range=[this.min,Math.round(this.max/2)]):this.range=[this.min,Math.round(this.max/2)]:this.range=[this.min,this.defaultRange],this.minRangeSlider||this.renderer.addClass(this.minSliderButton.nativeElement,"nfc-range-input__slider-button--hidden")},t.prototype.setCustomCss=function(){this.sliderButtonCssClass&&this.setSliderCss(this.sliderButtonCssClass),this.barCssClass&&this.setBarCss(this.barCssClass),this.highlightBarCssClass&&this.setBarHighlightCss(this.highlightBarCssClass)},t.prototype.setBarCss=function(t){this.renderer.removeClass(this.bar.nativeElement,"nfc-range-input__bar-styling"),this.renderer.addClass(this.bar.nativeElement,t)},t.prototype.setBarHighlightCss=function(t){this.renderer.removeClass(this.barHighlight.nativeElement,"nfc-range-input__bar-highlight-styling"),this.renderer.addClass(this.barHighlight.nativeElement,t)},t.prototype.setSliderCss=function(t){this.minSliderButton&&(this.renderer.removeClass(this.minSliderButton.nativeElement,"nfc-range-input__slider-button-styling"),this.renderer.addClass(this.minSliderButton.nativeElement,t)),this.minSliderButton&&(this.renderer.removeClass(this.maxSliderButton.nativeElement,"nfc-range-input__slider-button-styling"),this.renderer.addClass(this.maxSliderButton.nativeElement,t))},t.prototype.minTouched=function(t){var e=t.changedTouches[0];this.minMouseDown(e)},t.prototype.maxTouched=function(t){var e=t.changedTouches[0];this.maxMouseDown(e)},t.prototype.minMouseDown=function(t){this.minSliderClicked=!0,this.minSelected=!0,this.maxSliderClicked=!1,this.maxSelected=!1,this.minSliderInitialLeft=t.target.offsetLeft,this.initialMinMouseX=t.clientX},t.prototype.maxMouseDown=function(t){this.maxSliderClicked=!0,this.maxSelected=!0,this.minSliderClicked=!1,this.minSelected=!1,this.maxSliderInitialLeft=t.target.offsetLeft,this.initialMaxMouseX=t.clientX},t.prototype.touchMove=function(t){var e=t.changedTouches[0];this.mouseMove(e)},t.prototype.onResize=function(t){this.range&&this.setDimensions()},t.prototype.mouseMove=function(t){if(this.minSelected||this.maxSelected){if(this.minSelected){this.minChange=t.clientX-this.initialMinMouseX;var e=this.minSliderInitialLeft+this.minChange;if((n=this.pixToVal(this.min,e))<=this.range[1])if(n<=this.min)this.minSliderLeft=0,this.range[0]=this.min;else{var i=this.calculateDistance(n);this.range[0]=i<=this.range[1]?i:this.range[1],this.minSliderLeft=this.valToPixel(this.range[0])}}else if(this.maxSelected){this.maxChange=t.clientX-this.initialMaxMouseX;var n;e=this.maxSliderInitialLeft+this.maxChange;if((n=this.pixToVal(this.min,e))>=this.range[0])if(n>=this.max)this.maxSliderLeft=this.rangeInPixels,this.range[1]=this.max;else{var s=this.calculateDistance(n);this.range[1]=s>this.range[0]?s<=this.max?s:this.max:this.range[0],this.maxSliderLeft=this.valToPixel(this.range[1])}}this.setHighlightBarDimensions(),this.setTooltipDimensions()}return!1},t.prototype.mouseUp=function(t){this.minSelected=!1,this.maxSelected=!1},t.prototype.calculateDistance=function(t){if(this.step){var e=(t=.5<=t-Math.floor(t)?Math.ceil(t):Math.floor(t))%this.step;if(0===e)return t;e>=this.step/2?t+=this.step-e:t-=e}return t},t.prototype.setDimensions=function(){this.bar&&this.maxSliderButton&&this.range&&this.range[0]!==undefined&&(this.setBarAndSliderDimensions(),this.setHighlightBarDimensions(),this.setTooltipDimensions())},t.prototype.setBarAndSliderDimensions=function(){this.sliderWidth=this.maxSliderButton.nativeElement.offsetWidth,this.sliderHeight=this.maxSliderButton.nativeElement.offsetHeight,this.barWidth=this.bar.nativeElement.offsetWidth,this.sliderWidth&&this.barWidth&&(this.rangeDiff=this.max-this.min,this.rangeInPixels=this.barWidth-this.sliderWidth,this.barWidth&&this.sliderWidth&&(this.valToPixelFactor=this.rangeInPixels/this.rangeDiff),this.minSliderLeft=(this.range[0]-this.min)*this.valToPixelFactor,this.maxSliderLeft=(this.range[1]-this.min)*this.valToPixelFactor)},t.prototype.setHighlightBarDimensions=function(){this.minRangeSlider?this.highlightBarLeft=this.minSliderLeft+this.sliderWidth/2:this.highlightBarLeft=this.minSliderLeft,this.highlightBarWidth=this.maxSliderLeft-this.minSliderLeft},t.prototype.setTooltipDimensions=function(){if(this.toolTipTop=-1*(this.sliderHeight+10),this.minToolTipWidth=this.getToolTipLength(this.range[0].toString()),8*this.minToolTipWidth+this.minSliderLeft+8>this.maxSliderLeft&&this.toolTips&&this.minRangeSlider){this.combineToolTip=!0,this.combineToolTipWidth=8*this.getToolTipLength(this.range[0]+"-"+this.range[1]);var t=this.rangeInPixels-this.combineToolTipWidth;this.combineToolTipLeft=this.minSliderLeft<t?this.minSliderLeft:t}else this.combineToolTip=!1},t.prototype.getToolTipLength=function(t){return String(t).match(/\d/g).length},t.prototype.pixToVal=function(t,e){return Number((t+e*(1/this.valToPixelFactor)).toFixed(2))},t.prototype.valToPixel=function(t){return this.valToPixelFactor*(t-this.min)},t.decorators=[{type:n.Component,args:[{selector:"nfc-range-input",template:'<div #bar class="nfc-range-input nfc-range-input__bar nfc-range-input__bar-styling"\n     (touchmove)="touchMove($event)" (touchend)="mouseUp($event)">\n\n  \x3c!-- tooltips --\x3e\n  <span *ngIf="toolTips && minRangeSlider && !combineToolTip" class="nfc-range-input__tooltip"\n        [style.top.px]="toolTipTop" [style.left.px]="minSliderLeft">{{range[0]}}</span>\n  <span *ngIf="toolTips && !combineToolTip" class="nfc-range-input__tooltip"\n        [style.top.px]="toolTipTop" [style.left.px]="maxSliderLeft">{{range[1]}}</span>\n  <span *ngIf="toolTips && minRangeSlider && range && combineToolTip" class="nfc-range-input__tooltip"\n        [style.top.px]="toolTipTop" [style.left.px]="combineToolTipLeft"  >{{range[0]}}-{{range[1]}}</span>\n\n  \x3c!-- bar highlight --\x3e\n  <div #barHighlight class="nfc-range-input__bar-highlight nfc-range-input__bar-highlight-styling"\n       [style.left.px]="highlightBarLeft" [style.width.px]="highlightBarWidth"></div>\n  \x3c!-- left slider --\x3e\n  <div #minSliderButton class="nfc-range-input__slider-button nfc-range-input__slider-button-styling"\n       [style.left.px]="minSliderLeft" (mousedown)="minMouseDown($event)"\n       (mouseup)="mouseUp($event)" (touchstart)="minTouched($event)"></div>\n  \x3c!-- right slider --\x3e\n  <div #maxSliderButton class="nfc-range-input__slider-button nfc-range-input__slider-button-styling"\n       [style.left.px]="maxSliderLeft" (mousedown)="maxMouseDown($event)"\n       (mouseup)="mouseUp($event)" (touchstart)="maxTouched($event)"></div>\n\n</div>\n',styles:[".nfc-range-input{position:relative;margin:20px 0;box-sizing:border-box}.nfc-range-input__slider-button{position:absolute;cursor:pointer;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.nfc-range-input__slider-button-styling{width:20px;height:20px;border-radius:50%;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,.2);cursor:pointer}.nfc-range-input__slider-button--hidden{display:none}.nfc-range-input__bar{width:100%}.nfc-range-input__bar-styling{height:4px;border-radius:4px;background:#d3d3d3}.nfc-range-input__bar-highlight{position:absolute;height:inherit}.nfc-range-input__bar-highlight-styling{background:#4169e1;border-radius:4px}.nfc-range-input__tooltip{position:absolute}"]}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:n.IterableDiffers}]},t.propDecorators={min:[{type:n.Input}],max:[{type:n.Input}],step:[{type:n.Input}],toolTips:[{type:n.Input}],minRangeSlider:[{type:n.Input}],defaultRange:[{type:n.Input}],highlightBarCssClass:[{type:n.Input}],barCssClass:[{type:n.Input}],sliderButtonCssClass:[{type:n.Input}],rangeChange:[{type:n.Output}],bar:[{type:n.ViewChild,args:["bar"]}],minSliderButton:[{type:n.ViewChild,args:["minSliderButton"]}],maxSliderButton:[{type:n.ViewChild,args:["maxSliderButton"]}],barHighlight:[{type:n.ViewChild,args:["barHighlight"]}],onResize:[{type:n.HostListener,args:["window:resize",["$event"]]}],mouseMove:[{type:n.HostListener,args:["window:mousemove",["$event"]]}],mouseUp:[{type:n.HostListener,args:["window:mouseup",["$event"]]}]},t}(),a=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{declarations:[s,o],imports:[e.CommonModule],exports:[s,o]}]}],t}();t.NgxFormComponentsService=i,t.NgxFormComponentsComponent=s,t.NgxFormComponentsModule=a,t.RangeInputComponent=o,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-form-components.umd.min.js.map